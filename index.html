<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœºäº•è¯­éŸ³æŠ¥ä¿®ç³»ç»Ÿ - ç§»åŠ¨ç«¯åŸå‹æ¼”ç¤º</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f6fa;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .prototype-container {
            display: flex;
            min-height: 100vh;
        }

        /* å·¦ä¾§å¯¼èˆªæ  */
        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 0;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            /* éšè—æ»šåŠ¨æ¡ */
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE å’Œ Edge */
        }

        .sidebar::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }

        .sidebar-header {
            padding: 20px;
            background: rgba(0,0,0,0.1);
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .sidebar-title {
            font-size: 18px;
            font-weight: 600;
            color: #ecf0f1;
        }

        .nav-section {
            padding: 5px 0;
        }

        .nav-section-title {
            padding: 12px 20px;
            font-size: 14px;
            color: #ecf0f1;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .nav-section-title:hover {
            background: rgba(255,255,255,0.05);
        }

        .nav-section-toggle {
            font-size: 12px;
            transition: transform 0.3s ease;
        }

        .nav-section.collapsed .nav-section-toggle {
            transform: rotate(-90deg);
        }

        .nav-section.collapsed .nav-section-content {
            display: none;
        }

        .nav-section-content {
            transition: all 0.3s ease;
        }

        .nav-item {
            padding: 10px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #bdc3c7;
            font-size: 14px;
        }

        .nav-item:hover {
            background: rgba(255,255,255,0.1);
            border-left-color: #3498db;
            color: #ecf0f1;
        }

        .nav-item.active {
            background: rgba(52, 152, 219, 0.2);
            border-left-color: #3498db;
            color: #3498db;
        }

        .nav-sub-item {
            padding: 8px 40px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            color: #95a5a6;
            font-size: 13px;
        }

        .nav-sub-item:hover {
            background: rgba(255,255,255,0.05);
            color: #bdc3c7;
        }

        .nav-sub-item.active {
            background: rgba(52, 152, 219, 0.1);
            color: #3498db;
        }

        .nav-icon {
            width: 16px;
            text-align: center;
        }

        /* å³ä¾§æ‰‹æœºå±•ç¤ºåŒºåŸŸ */
        .phone-display {
            flex: 1;
            margin-left: 280px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 30px;
            background: #ffffff;
        }

        .phone-frame {
            width: 360px;
            height: 720px;
            background: #000;
            border-radius: 36px;
            padding: 8px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
            position: relative;
        }

        .phone-screen {
            width: 100%;
            height: 100%;
            background: #fff;
            border-radius: 28px;
            overflow: hidden;
            position: relative;
        }

        .container {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .header {
            background: linear-gradient(135deg, #4285f4 0%, #357ae8 100%);
            color: white;
            padding: 15px 20px;
            text-align: center;
            font-size: 18px;
            font-weight: 600;
        }

        .page {
            display: none;
            height: calc(100% - 60px);
            overflow-y: auto;
        }

        .page.active {
            display: block;
        }

        /* å…¥å£é¡µé¢æ ·å¼ */
        .entry-page {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 50px 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            height: 100%;
        }

        .repair-buttons {
            display: flex;
            flex-direction: column;
            gap: 40px;
            align-items: center;
        }

        .repair-btn {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            border: none;
            font-size: 16px;
            font-weight: 600;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .voice-btn {
            background: linear-gradient(135deg, #4285f4 0%, #357ae8 100%);
            box-shadow: 0 8px 25px rgba(66, 133, 244, 0.3);
        }

        .voice-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(66, 133, 244, 0.4);
        }

        .manual-btn {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            color: #6c757d;
            border: 2px solid #dee2e6;
        }

        .btn-icon {
            font-size: 28px;
        }

        /* è¯­éŸ³æŠ¥ä¿®é¡µé¢æ ·å¼ */
        .voice-page {
            display: flex;
            flex-direction: column;
            height: calc(100% - 60px);
            padding: 0;
            overflow: hidden;
        }

        .voice-guide {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            padding: 15px 20px;
            text-align: center;
            flex-shrink: 0;
        }

        .guide-title {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
        }

        .guide-content {
            font-size: 13px;
            color: #666;
            line-height: 1.5;
            margin-bottom: 10px;
        }

        .guide-keywords {
            color: #e74c3c;
            font-weight: 600;
        }

        .guide-tips {
            font-size: 12px;
            color: #999;
            margin-top: 8px;
        }

        /* èŠå¤©åŒºåŸŸæ ·å¼ */
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 10px 15px;
            overflow: hidden;
            min-height: 0;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding-bottom: 10px;
            min-height: 150px;
            /* éšè—æ»šåŠ¨æ¡ */
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE å’Œ Edge */
        }

        .chat-messages::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }

        .message {
            margin-bottom: 15px;
            display: flex;
            flex-direction: column;
        }

        .message.ai {
            align-items: flex-start;
        }

        .message.user {
            align-items: flex-end;
        }

        .message-bubble {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 18px;
            font-size: 14px;
            line-height: 1.4;
            word-wrap: break-word;
        }

        .message.ai .message-bubble {
            background: #f0f0f0;
            color: #333;
            border-bottom-left-radius: 8px;
        }

        .message.user .message-bubble {
            background: #4285f4;
            color: white;
            border-bottom-right-radius: 8px;
        }

        .message-time {
            font-size: 11px;
            color: #999;
            margin-top: 4px;
            margin-bottom: 0;
        }

        .message.ai .message-time {
            margin-left: 16px;
        }

        .message.user .message-time {
            margin-right: 16px;
        }

        /* è¾“å…¥åŒºåŸŸæ ·å¼ */
        .voice-input-area {
            padding: 10px 15px 15px;
            border-top: 1px solid #e0e0e0;
            background: white;
            flex-shrink: 0;
        }

        .input-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .voice-record-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(135deg, #4285f4 0%, #357ae8 100%);
            color: white;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .voice-record-btn:active {
            transform: scale(0.95);
            background: linear-gradient(135deg, #3367d6 0%, #2b5ce6 100%);
        }

        .voice-record-btn.recording {
            animation: pulse 1.5s infinite;
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
        }

        .input-status {
            flex: 1;
            font-size: 13px;
            color: #666;
            margin-left: 10px;
        }

        .submit-area {
            margin-top: 15px;
            text-align: center;
        }

        .submit-conversation-btn {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: none;
            transition: all 0.3s ease;
        }

        .submit-conversation-btn.show {
            display: inline-block;
        }

        .submit-conversation-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
        }

        /* ä¿¡æ¯æ”¶é›†çŠ¶æ€ */
        .info-status {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 10px 12px;
            margin: 8px 0;
            font-size: 12px;
            flex-shrink: 0;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            margin: 6px 0;
        }

        .info-label {
            color: #666;
        }

        .info-value {
            color: #333;
            font-weight: 500;
        }

        .info-value.missing {
            color: #e74c3c;
        }

        .info-value.collected {
            color: #28a745;
        }

        /* æ•°æ®ç»Ÿè®¡é¡µé¢æ ·å¼ */
        .stats-page {
            padding: 20px;
            height: calc(100% - 60px);
            overflow-y: auto;
            background: #f5f6fa;
            /* éšè—æ»šåŠ¨æ¡ */
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE å’Œ Edge */
        }

        .stats-page::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }

        .stats-header {
            margin-bottom: 20px;
        }

        .stats-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .stats-subtitle {
            font-size: 12px;
            color: #666;
        }

        /* æ•°æ®å¡ç‰‡æ ·å¼ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .stat-card.primary {
            background: linear-gradient(135deg, #4285f4 0%, #357ae8 100%);
            color: white;
        }

        .stat-card.success {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }

        .stat-card.warning {
            background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);
            color: white;
        }

        .stat-card.danger {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
            color: white;
        }

        .stat-card.info {
            background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);
            color: white;
        }

        .stat-value {
            font-size: 20px;
            font-weight: bold;
            margin: 4px 0;
            line-height: 1;
        }

        .stat-label {
            font-size: 11px;
            opacity: 0.9;
            line-height: 1.2;
        }

        /* ç»„ç»‡ç»Ÿè®¡æ ·å¼ */
        .org-stats {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .org-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid #f0f0f0;
        }

        .org-name {
            font-size: 14px;
            font-weight: 600;
            color: #333;
        }

        .org-total {
            font-size: 12px;
            color: #666;
        }

        .org-data {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
        }

        .org-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 6px 8px;
            background: #f8f9fa;
            border-radius: 6px;
            font-size: 12px;
        }

        .org-item-label {
            color: #666;
        }

        .org-item-value {
            font-weight: 600;
            color: #333;
        }

        .org-item-value.urgent {
            color: #dc3545;
        }

        .org-item-value.normal {
            color: #28a745;
        }

        /* æ—¶é•¿ç»Ÿè®¡æ ·å¼ */
        .duration-stats {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .duration-header {
            font-size: 14px;
            font-weight: 600;
            color: #333;
            margin-bottom: 12px;
        }

        .duration-bar {
            margin-bottom: 10px;
        }

        .duration-bar-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
            font-size: 11px;
        }

        .duration-bar-label {
            color: #666;
        }

        .duration-bar-value {
            font-weight: 600;
            color: #333;
        }

        .duration-bar-fill {
            height: 6px;
            background: #f0f0f0;
            border-radius: 3px;
            overflow: hidden;
        }

        .duration-bar-progress {
            height: 100%;
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .duration-bar-progress.fast {
            background: linear-gradient(90deg, #28a745, #20c997);
        }

        .duration-bar-progress.normal {
            background: linear-gradient(90deg, #ffc107, #fd7e14);
        }

        .duration-bar-progress.slow {
            background: linear-gradient(90deg, #dc3545, #c82333);
        }

        /* å¤„ç†é¡µé¢æ ·å¼ */
        .processing-page {
            padding: 30px 20px;
            text-align: center;
        }

        .processing-visual {
            margin: 30px 0;
        }

        .loading-circle {
            width: 80px;
            height: 80px;
            border: 6px solid #f3f3f3;
            border-top: 6px solid #4285f4;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .process-steps {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 15px;
            margin: 20px 0;
            text-align: left;
        }

        .step {
            display: flex;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #dee2e6;
            font-size: 14px;
        }

        .step:last-child {
            border-bottom: none;
        }

        .step-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: white;
        }

        .step-icon.completed {
            background: #28a745;
        }

        .step-icon.processing {
            background: #4285f4;
            animation: pulse 1.5s infinite;
        }

        .step-icon.pending {
            background: #dee2e6;
            color: #6c757d;
        }

        /* æ‹ç…§å¼¹çª—æ ·å¼ */
        .photo-modal {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .photo-modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 25px 15px;
            margin: 20px;
            text-align: center;
            max-width: 250px;
        }

        .modal-icon {
            font-size: 40px;
            color: #4285f4;
            margin-bottom: 15px;
        }

        .modal-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-top: 20px;
        }

        .modal-btn {
            padding: 10px 16px;
            border: none;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .photo-btn-yes {
            background: linear-gradient(135deg, #4285f4 0%, #357ae8 100%);
            color: white;
        }

        .photo-btn-no {
            background: #f8f9fa;
            color: #6c757d;
            border: 1px solid #dee2e6;
        }

        /* å®Œæˆé¡µé¢æ ·å¼ */
        .complete-page {
            padding: 40px 20px;
            text-align: center;
        }

        .success-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 32px;
        }

        .order-info {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin: 25px 0;
            text-align: left;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            border-bottom: 1px solid #dee2e6;
            font-size: 14px;
        }

        .info-row:last-child {
            border-bottom: none;
        }

        .info-label {
            color: #6c757d;
            font-weight: 500;
        }

        .info-value {
            color: #333;
            font-weight: 600;
        }

        .back-btn {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 25px;
        }

        /* å®šä½æƒé™å¼¹çª—æ ·å¼ */
        .location-modal {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: flex-end;
            justify-content: center;
            z-index: 2000;
            animation: fadeIn 0.3s ease;
        }

        .location-modal.show {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        .location-modal-content {
            background: white;
            width: 100%;
            max-width: 100%;
            border-radius: 20px 20px 0 0;
            padding: 0;
            margin: 0;
            animation: slideUp 0.3s ease;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.15);
        }

        .location-modal-header {
            padding: 20px 20px 15px;
            border-bottom: 1px solid #f0f0f0;
            text-align: center;
            position: relative;
        }

        .location-modal-title {
            font-size: 17px;
            font-weight: 600;
            color: #333;
            margin: 0;
        }

        .location-modal-close {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            font-size: 18px;
            color: #999;
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .location-modal-body {
            padding: 20px;
        }

        .location-description {
            font-size: 14px;
            color: #666;
            line-height: 1.5;
            margin-bottom: 25px;
            text-align: left;
        }

        .location-buttons {
            display: flex;
            gap: 10px;
            margin: 0;
        }

        .location-btn {
            flex: 1;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .location-deny-btn {
            background: #f7f7f7;
            color: #333;
        }

        .location-deny-btn:hover {
            background: #e8e8e8;
        }

        .location-allow-btn {
            background: #07c160;
            color: white;
        }

        .location-allow-btn:hover {
            background: #06ad56;
        }

        /* æœºäº•ç¡®è®¤é¡µé¢æ ·å¼ */
        .well-confirm-page {
            padding: 30px 20px;
            text-align: center;
        }

        .well-info {
            background: #e8f4f8;
            border-radius: 15px;
            padding: 20px;
            margin: 25px 0;
            border: 2px solid #4285f4;
        }

        .well-number {
            font-size: 24px;
            font-weight: bold;
            color: #4285f4;
            margin-bottom: 10px;
        }

        .well-details {
            font-size: 12px;
            color: #6c757d;
            line-height: 1.5;
        }

        .confirm-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 25px 0;
        }

        .confirm-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .yes-btn {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }

        .no-btn {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
            color: white;
        }

        /* ä¿¡æ¯ç¡®è®¤é¡µé¢æ ·å¼ */
        .confirm-info-page {
            padding: 30px 20px;
        }

        .info-summary {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
        }

        .summary-title {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
            text-align: center;
        }

        .voice-content {
            background: #e8f4f8;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #4285f4;
        }

        .voice-content-text {
            font-size: 14px;
            color: #333;
            line-height: 1.5;
        }

        .edit-btn {
            background: #f8f9fa;
            color: #6c757d;
            border: 1px solid #dee2e6;
            padding: 8px 16px;
            border-radius: 15px;
            font-size: 12px;
            cursor: pointer;
            margin-top: 10px;
        }

        /* ç…§ç‰‡ä¸Šä¼ é¡µé¢æ ·å¼ */
        .photo-upload-page {
            padding: 30px 20px;
            text-align: center;
        }

        .photo-preview {
            width: 200px;
            height: 150px;
            border: 2px dashed #dee2e6;
            border-radius: 10px;
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8f9fa;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .photo-preview:hover {
            border-color: #4285f4;
            background: #e8f4f8;
        }

        .photo-preview.has-image {
            border-style: solid;
            border-color: #4285f4;
        }

        .upload-icon {
            font-size: 40px;
            color: #6c757d;
        }

        .manual-input {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
        }

        .input-field {
            width: 100%;
            padding: 10px;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            margin: 8px 0;
            font-size: 14px;
        }

        .input-label {
            font-size: 12px;
            color: #6c757d;
            margin-bottom: 5px;
            display: block;
        }

        /* æ–°æ•°æ®ç»Ÿè®¡é¡µé¢æ ·å¼ */
        .new-stats-page {
            padding: 15px;
            height: calc(100% - 60px);
            overflow-y: auto;
            background: #f5f6fa;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .new-stats-page::-webkit-scrollbar {
            display: none;
        }

        /* åŒºåŸŸé€‰æ‹©å™¨ */
        .region-selector {
            background: white;
            border-radius: 12px;
            padding: 12px 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .region-label {
            font-size: 13px;
            color: #666;
            margin-right: 10px;
        }

        .region-value {
            font-size: 14px;
            font-weight: 600;
            color: #333;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .region-icon {
            color: #4285f4;
            font-size: 16px;
        }

        /* ç»Ÿè®¡æ¨¡å— */
        .stats-module {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .module-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }

        .module-title {
            font-size: 15px;
            font-weight: 600;
            color: #333;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .module-icon {
            font-size: 18px;
        }

        .drill-btn {
            background: linear-gradient(135deg, #4285f4 0%, #357ae8 100%);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .drill-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(66, 133, 244, 0.3);
        }

        .stats-row {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .stat-item {
            flex: 1;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 10px;
            padding: 12px 10px;
            text-align: center;
            border: 1px solid #dee2e6;
        }

        .stat-item.highlight {
            background: linear-gradient(135deg, #4285f4 0%, #357ae8 100%);
            color: white;
            border: none;
        }

        .stat-item.warning {
            background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);
            color: white;
            border: none;
        }

        .stat-item.success {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
        }

        .stat-item-value {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .stat-item-label {
            font-size: 11px;
            opacity: 0.9;
        }

        /* æ•°æ®ä¸‹é’»é¡µé¢æ ·å¼ */
        .drill-down-page {
            padding: 15px;
            height: calc(100% - 60px);
            overflow-y: auto;
            background: #f5f6fa;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .drill-down-page::-webkit-scrollbar {
            display: none;
        }

        .breadcrumb {
            background: white;
            border-radius: 10px;
            padding: 10px 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            color: #666;
        }

        .breadcrumb-item {
            cursor: pointer;
            color: #4285f4;
        }

        .breadcrumb-separator {
            color: #999;
        }

        .breadcrumb-current {
            color: #333;
            font-weight: 600;
        }

        /* å±‚çº§å¡ç‰‡ */
        .level-card {
            background: white;
            border-radius: 12px;
            padding: 12px 15px;
            margin-bottom: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid #4285f4;
        }

        .level-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transform: translateX(2px);
        }

        .level-card.expanded {
            border-left-color: #28a745;
        }

        .card-header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-title-section {
            flex: 1;
        }

        .card-title {
            font-size: 15px;
            font-weight: 600;
            color: #333;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .card-subtitle {
            font-size: 12px;
            color: #666;
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .card-subtitle span {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .card-toggle {
            font-size: 20px;
            color: #4285f4;
            transition: transform 0.3s ease;
        }

        .level-card.expanded .card-toggle {
            transform: rotate(180deg);
        }

        .card-content {
            display: none;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid #f0f0f0;
        }

        .level-card.expanded .card-content {
            display: block;
        }

        /* æœºäº•å¡ç‰‡ï¼ˆæ‘çº§ï¼‰ */
        .well-card {
            background: white;
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 10px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 3px solid #ffc107;
        }

        .well-card:hover {
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
            transform: translateX(2px);
        }

        .well-card-title {
            font-size: 13px;
            font-weight: 600;
            color: #333;
            margin-bottom: 6px;
        }

        .well-card-info {
            font-size: 11px;
            color: #666;
        }

        /* æœºäº•è¯¦æƒ…é¡µé¢ */
        .well-detail-page {
            padding: 15px;
            height: calc(100% - 60px);
            overflow-y: auto;
            background: #f5f6fa;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .well-detail-page::-webkit-scrollbar {
            display: none;
        }

        .detail-card {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .detail-header {
            text-align: center;
            padding: 15px 0;
            border-bottom: 2px solid #f0f0f0;
            margin-bottom: 15px;
        }

        .detail-well-number {
            font-size: 22px;
            font-weight: bold;
            color: #4285f4;
            margin-bottom: 8px;
        }

        .detail-well-region {
            font-size: 14px;
            color: #666;
        }

        .detail-row {
            display: flex;
            padding: 10px 0;
            border-bottom: 1px solid #f8f9fa;
            font-size: 13px;
        }

        .detail-row:last-child {
            border-bottom: none;
        }

        .detail-label {
            width: 100px;
            color: #666;
            font-weight: 500;
        }

        .detail-value {
            flex: 1;
            color: #333;
            font-weight: 600;
        }

        .detail-value.highlight {
            color: #4285f4;
            font-size: 14px;
        }

        .detail-value.important {
            color: #dc3545;
            font-weight: bold;
        }

        .contact-info {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 12px;
            margin-top: 10px;
        }

        .contact-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e9ecef;
            font-size: 13px;
        }

        .contact-item:last-child {
            border-bottom: none;
        }

        .contact-label {
            color: #666;
        }

        .contact-value {
            color: #333;
            font-weight: 600;
        }

        .back-drill-btn {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 15px;
            transition: all 0.3s ease;
        }

        .back-drill-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body>
    <div class="prototype-container">
        <!-- å·¦ä¾§å¯¼èˆªæ  -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">é¡µé¢å¯¼èˆª</div>
            </div>
            
            <div class="nav-section">
                <div class="nav-section-title" onclick="toggleSection(this)">
                    <span>ğŸ’¬ æŠ¥ä¿®ç®¡ç†</span>
                    <span class="nav-section-toggle">â–¼</span>
                </div>
                <div class="nav-section-content">
                    <div class="nav-item active" onclick="showPageAndHighlight('entryPage', this)">
                        <span class="nav-icon">ğŸ </span>
                        <span>æŠ¥ä¿®å…¥å£</span>
                    </div>
                    <div class="nav-sub-item" onclick="triggerLocationModal(this)">
                        <span class="nav-icon">ğŸ“</span>
                        <span>è·å–å®šä½</span>
                    </div>
                    <div class="nav-sub-item" onclick="showPageAndHighlight('wellConfirmPage', this)">
                        <span class="nav-icon">ğŸ—ï¸</span>
                        <span>æœºäº•ç¡®è®¤</span>
                    </div>
                    <div class="nav-sub-item" onclick="showPageAndHighlight('voicePage', this)">
                        <span class="nav-icon">ğŸ¤</span>
                        <span>AIè¯­éŸ³æŠ¥ä¿®</span>
                    </div>
                    <div class="nav-sub-item" onclick="showPageAndHighlight('confirmPage', this)">
                        <span class="nav-icon">âœ…</span>
                        <span>ä¿¡æ¯ç¡®è®¤</span>
                    </div>
                    <div class="nav-sub-item" onclick="showPageAndHighlight('photoPage', this)">
                        <span class="nav-icon">ğŸ“·</span>
                        <span>ä¸Šä¼ ç…§ç‰‡</span>
                    </div>
                    <div class="nav-sub-item" onclick="showPageAndHighlight('processPage', this)">
                        <span class="nav-icon">âš™ï¸</span>
                        <span>AIå¤„ç†ä¸­</span>
                    </div>
                    <div class="nav-sub-item" onclick="showPageAndHighlight('completePage', this)">
                        <span class="nav-icon">âœ…</span>
                        <span>å®ŒæˆæŠ¥ä¿®</span>
                    </div>
                    <div class="nav-item">
                        <span class="nav-icon">ğŸ“</span>
                        <span>æ‰‹åŠ¨å¡«æŠ¥</span>
                    </div>
                </div>
            </div>

            <div class="nav-section collapsed">
                <div class="nav-section-title" onclick="toggleSection(this)">
                    <span>ğŸ“‹ å·¥å•ç®¡ç†ï¼ˆæœ¬æ¬¡ä¸åšï¼‰</span>
                    <span class="nav-section-toggle">â–¼</span>
                </div>
                <div class="nav-section-content">
                    <div class="nav-item">
                        <span class="nav-icon">ğŸ“‹</span>
                        <span>å·¥å•åˆ—è¡¨</span>
                    </div>
                    <div class="nav-sub-item">
                        <span class="nav-icon">ğŸ”</span>
                        <span>å¾…å¤„ç†å·¥å•</span>
                    </div>
                    <div class="nav-sub-item">
                        <span class="nav-icon">â³</span>
                        <span>å¤„ç†ä¸­å·¥å•</span>
                    </div>
                    <div class="nav-sub-item">
                        <span class="nav-icon">âœ…</span>
                        <span>å·²å®Œæˆå·¥å•</span>
                    </div>
                    <div class="nav-item">
                        <span class="nav-icon">ğŸ”§</span>
                        <span>ç»´ä¿®è®°å½•</span>
                    </div>
                </div>
            </div>

            <div class="nav-section collapsed">
                <div class="nav-section-title" onclick="toggleSection(this)">
                    <span>ğŸ“Š æ•°æ®åˆ†æï¼ˆæœ¬æ¬¡åªåšé™æ€é¡µé¢ï¼‰</span>
                    <span class="nav-section-toggle">â–¼</span>
                </div>
                <div class="nav-section-content">
                    <div class="nav-item" onclick="showPageAndHighlight('statsPage', this)">
                        <span class="nav-icon">ğŸ“ˆ</span>
                        <span>æ•°æ®ç»Ÿè®¡</span>
                    </div>
                    <div class="nav-item" onclick="showPageAndHighlight('newStatsPage', this)">
                        <span class="nav-icon">ğŸ”</span>
                        <span>æ–°æ•°æ®ç»Ÿè®¡</span>
                    </div>
                    <div class="nav-sub-item">
                        <span class="nav-icon">ğŸ“Š</span>
                        <span>æŠ¥ä¿®è¶‹åŠ¿</span>
                    </div>
                    <div class="nav-sub-item">
                        <span class="nav-icon">â±ï¸</span>
                        <span>å“åº”æ—¶é—´</span>
                    </div>
                    <div class="nav-sub-item">
                        <span class="nav-icon">ğŸ¯</span>
                        <span>å®Œæˆç‡</span>
                    </div>
                    <div class="nav-item">
                        <span class="nav-icon">ğŸ“</span>
                        <span>æŠ¥è¡¨ç”Ÿæˆ</span>
                    </div>
                </div>
            </div>

            <div class="nav-section collapsed">
                <div class="nav-section-title" onclick="toggleSection(this)">
                    <span>âš™ï¸ ç³»ç»Ÿè®¾ç½®ï¼ˆæœ¬æ¬¡ä¸åšï¼‰</span>
                    <span class="nav-section-toggle">â–¼</span>
                </div>
                <div class="nav-section-content">
                    <div class="nav-item">
                        <span class="nav-icon">ğŸ‘¤</span>
                        <span>ç”¨æˆ·ç®¡ç†</span>
                    </div>
                    <div class="nav-sub-item">
                        <span class="nav-icon">ğŸ‘¥</span>
                        <span>ç”¨æˆ·åˆ—è¡¨</span>
                    </div>
                    <div class="nav-sub-item">
                        <span class="nav-icon">ğŸ”</span>
                        <span>æƒé™é…ç½®</span>
                    </div>
                    <div class="nav-item">
                        <span class="nav-icon">ğŸ”§</span>
                        <span>ç³»ç»Ÿé…ç½®</span>
                    </div>
                    <div class="nav-sub-item">
                        <span class="nav-icon">ğŸ”Š</span>
                        <span>è¯­éŸ³é…ç½®</span>
                    </div>
                    <div class="nav-sub-item">
                        <span class="nav-icon">ğŸ¤–</span>
                        <span>AIæ¨¡å‹è®¾ç½®</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- å³ä¾§æ‰‹æœºå±•ç¤ºåŒºåŸŸ -->
        <div class="phone-display">
            <div class="phone-frame">
                <div class="phone-screen">
                    <div class="container">
                        <div class="header">
                            <span id="headerTitle">æœºäº•æŠ¥ä¿®</span>
                        </div>

                        <!-- å…¥å£é¡µé¢ -->
                        <div class="page active" id="entryPage">
                            <div class="entry-page">
                                <div class="repair-buttons">
                                    <button class="repair-btn voice-btn" onclick="startVoiceRepair()">
                                        <div class="btn-icon">ğŸ¤</div>
                                        <div>AIè¯­éŸ³æŠ¥ä¿®</div>
                                    </button>
                                    <button class="repair-btn manual-btn">
                                        <div class="btn-icon">âœï¸</div>
                                        <div>æ‰‹åŠ¨å¡«æŠ¥</div>
                                    </button>
                                </div>
                            </div>
                        </div>



                        <!-- æœºäº•ç¡®è®¤é¡µé¢ -->
                        <div class="page" id="wellConfirmPage">
                            <div class="well-confirm-page">
                                <h3 style="margin-bottom: 15px; color: #333; font-size: 16px;">ç¡®è®¤æœºäº•ä½ç½®</h3>
                                <p style="color: #6c757d; margin-bottom: 15px; font-size: 12px;">æ ¹æ®æ‚¨çš„ä½ç½®ï¼Œä¸ºæ‚¨æ‰¾åˆ°æœ€è¿‘çš„æœºäº•</p>
                                
                                <div class="well-info">
                                    <div class="well-number">01å·æœºäº•</div>
                                    <div class="well-details">
                                        è·ç¦»ï¼šçº¦50ç±³<br>
                                        ä½ç½®ï¼šæ‘ä¸œå—è§’å†œç”°<br>
                                        è´Ÿè´£äººï¼šå¼ å¸ˆå‚… 138****5678
                                    </div>
                                </div>

                                <p style="color: #333; margin-bottom: 20px; font-size: 14px;">è¯·é—®æ˜¯ä¸ºè¿™å£æœºäº•æŠ¥ä¿®å—ï¼Ÿ</p>

                                <div class="confirm-buttons">
                                    <button class="confirm-btn yes-btn" onclick="confirmWell(true)">æ˜¯çš„</button>
                                    <button class="confirm-btn no-btn" onclick="confirmWell(false)">ä¸æ˜¯</button>
                                </div>
                            </div>
                        </div>

                        <!-- æ‰‹åŠ¨é€‰æ‹©æœºäº•é¡µé¢ -->
                        <div class="page" id="manualWellPage">
                            <div class="manual-input">
                                <h3 style="margin-bottom: 15px; color: #333; font-size: 16px; text-align: center;">æ‰‹åŠ¨é€‰æ‹©æœºäº•</h3>
                                
                                <label class="input-label">æœºäº•ç¼–å·</label>
                                <input type="text" class="input-field" placeholder="è¯·è¾“å…¥æœºäº•ç¼–å·ï¼ˆå¦‚ï¼š01å·æœºäº•ï¼‰" id="wellNumberInput">
                                
                                <label class="input-label">å¤§æ¦‚ä½ç½®</label>
                                <input type="text" class="input-field" placeholder="è¯·è¾“å…¥æœºäº•å¤§æ¦‚ä½ç½®" id="wellLocationInput">
                                
                                <div style="text-align: center; margin-top: 25px;">
                                    <button class="confirm-btn yes-btn" onclick="confirmManualWell()">ç¡®è®¤é€‰æ‹©</button>
                                    <button class="confirm-btn no-btn" onclick="goToManualReport()" style="margin-left: 15px;">è½¬ä¸ºæ‰‹åŠ¨å¡«æŠ¥</button>
                                </div>
                            </div>
                        </div>

                        <!-- è¯­éŸ³æŠ¥ä¿®é¡µé¢ -->
                        <div class="page" id="voicePage">
                            <div class="voice-page">
                                <!-- å¼•å¯¼æç¤ºåŒºåŸŸ -->
                                <div class="voice-guide">
                                    <div class="guide-title">AIè¯­éŸ³æŠ¥ä¿®æŒ‡å¼•</div>
                                    <div class="guide-content">
                                        é•¿æŒ‰å½•éŸ³é”®ï¼Œè¡¨è¾¾æ¸…æ™°ï¼Œå°½é‡ä½¿ç”¨æ™®é€šè¯<br>
                                        è¯·è¯´å‡ºï¼š<span class="guide-keywords">æ•…éšœç±»å‹</span>ã€<span class="guide-keywords">å§“å</span>ã€<span class="guide-keywords">ç”µè¯</span>ç­‰ä¿¡æ¯
                                    </div>
                                    <div class="guide-tips">ç³»ç»Ÿä¼šæ ¹æ®æ‚¨çš„è¯­éŸ³å†…å®¹æ™ºèƒ½æé—®ï¼Œæ”¶é›†å®Œæ•´ä¿¡æ¯</div>
                                </div>

                                <!-- èŠå¤©å¯¹è¯åŒºåŸŸ -->
                                <div class="chat-container">
                                    <div class="chat-messages" id="chatMessages">
                                        <div class="message ai">
                                            <div class="message-bubble">
                                                æ‚¨å¥½ï¼æˆ‘æ˜¯AIåŠ©æ‰‹ï¼Œè¯·å‘Šè¯‰æˆ‘æœºäº•çš„æ•…éšœæƒ…å†µï¼Œæˆ‘ä¼šå¸®æ‚¨è®°å½•æŠ¥ä¿®ä¿¡æ¯ã€‚
                                            </div>
                                            <div class="message-time">åˆšåˆš</div>
                                        </div>
                                    </div>

                                    <!-- ä¿¡æ¯æ”¶é›†çŠ¶æ€ -->
                                    <div class="info-status" id="infoStatus">
                                        <div class="info-item">
                                            <span class="info-label">æ•…éšœç±»å‹:</span>
                                            <span class="info-value missing" id="faultTypeStatus">å¾…æ”¶é›†</span>
                                        </div>
                                        <div class="info-item">
                                            <span class="info-label">è”ç³»å§“å:</span>
                                            <span class="info-value missing" id="nameStatus">å¾…æ”¶é›†</span>
                                        </div>
                                        <div class="info-item">
                                            <span class="info-label">è”ç³»ç”µè¯:</span>
                                            <span class="info-value missing" id="phoneStatus">å¾…æ”¶é›†</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- è¾“å…¥åŒºåŸŸ -->
                                <div class="voice-input-area">
                                    <div class="input-controls">
                                        <button class="voice-record-btn" id="voiceBtn"
                                                onmousedown="startRecording()" 
                                                onmouseup="stopRecording()"
                                                ontouchstart="startRecording()" 
                                                ontouchend="stopRecording()">
                                            ğŸ¤
                                        </button>
                                        <div class="input-status" id="inputStatus">é•¿æŒ‰å½•éŸ³ï¼Œæ¾å¼€å‘é€</div>
                                    </div>
                                    
                                    <div class="submit-area">
                                        <button class="submit-conversation-btn" id="submitConversationBtn" onclick="submitConversation()">
                                            æäº¤æŠ¥ä¿®ä¿¡æ¯
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ä¿¡æ¯ç¡®è®¤é¡µé¢ -->
                        <div class="page" id="confirmPage">
                            <div class="confirm-info-page">
                                <div class="summary-title">è¯·ç¡®è®¤æŠ¥ä¿®ä¿¡æ¯</div>
                                
                                <div class="info-summary">
                                    <div class="info-row">
                                        <span class="info-label">æœºäº•ç¼–å·</span>
                                        <span class="info-value" id="confirmWellNumber">01å·æœºäº•</span>
                                    </div>
                                    <div class="info-row">
                                        <span class="info-label">æœºäº•ä½ç½®</span>
                                        <span class="info-value" id="confirmWellLocation">æ‘ä¸œå—è§’å†œç”°</span>
                                    </div>
                                </div>

                                <div class="voice-content">
                                    <div style="font-weight: 600; margin-bottom: 10px;">è¯­éŸ³è¯†åˆ«ç»“æœï¼š</div>
                                    <div class="voice-content-text" id="confirmVoiceText">
                                        æœºäº•è®¾å¤‡æŸåï¼Œä¸é€šç”µï¼Œè¯·å°½å¿«å®‰æ’ç»´ä¿®äººå‘˜è¿‡æ¥æ£€æŸ¥ï¼Œæƒ…å†µæ¯”è¾ƒç´§æ€¥ã€‚
                                    </div>
                                    <button class="edit-btn" onclick="reRecordVoice()">é‡æ–°å½•éŸ³</button>
                                </div>

                                <div style="text-align: center; margin-top: 25px;">
                                    <button class="confirm-btn yes-btn" onclick="confirmInfoComplete()" style="margin-right: 15px;">ä¿¡æ¯å®Œæ•´ï¼Œç»§ç»­</button>
                                    <button class="confirm-btn no-btn" onclick="reRecordVoice()">é‡æ–°å½•éŸ³</button>
                                </div>
                            </div>
                        </div>

                        <!-- ç…§ç‰‡ä¸Šä¼ é¡µé¢ -->
                        <div class="page" id="photoPage">
                            <div class="photo-upload-page">
                                <h3 style="margin-bottom: 15px; color: #333; font-size: 16px;">ä¸Šä¼ æ•…éšœç…§ç‰‡</h3>
                                <p style="color: #6c757d; margin-bottom: 25px; font-size: 12px;">æ‹æ‘„æ•…éšœç°åœºç…§ç‰‡æœ‰åŠ©äºç»´ä¿®äººå‘˜å¿«é€Ÿå®šä½é—®é¢˜</p>
                                
                                <div class="photo-preview" id="photoPreview" onclick="takePhoto()">
                                    <div class="upload-icon">ğŸ“·</div>
                                </div>
                                <p style="color: #6c757d; font-size: 11px; margin-bottom: 25px;">ç‚¹å‡»ä¸Šæ–¹åŒºåŸŸæ‹ç…§</p>

                                <div class="confirm-buttons">
                                    <button class="confirm-btn yes-btn" onclick="uploadPhoto()" id="uploadBtn" style="display: none;">ä¸Šä¼ ç…§ç‰‡</button>
                                    <button class="confirm-btn no-btn" onclick="skipPhoto()">è·³è¿‡ä¸Šä¼ </button>
                                </div>
                            </div>
                        </div>

                        <!-- å¤„ç†é¡µé¢ -->
                        <div class="page" id="processPage">
                            <div class="processing-page">
                                <h3 style="margin-bottom: 15px; color: #333; font-size: 16px;">æ­£åœ¨å¤„ç†æ‚¨çš„æŠ¥ä¿®ä¿¡æ¯</h3>
                                
                                <div class="processing-visual">
                                    <div class="loading-circle"></div>
                                </div>

                                <div class="process-steps">
                                    <div class="step">
                                        <div class="step-icon completed">âœ“</div>
                                        <div>è¯­éŸ³è¯†åˆ«å®Œæˆ</div>
                                    </div>
                                    <div class="step">
                                        <div class="step-icon processing" id="aiStep">ğŸ¤–</div>
                                        <div>AIæ™ºèƒ½åˆ†æä¸­...</div>
                                    </div>
                                    <div class="step">
                                        <div class="step-icon pending" id="orderStep">ğŸ“‹</div>
                                        <div>ç”Ÿæˆç»´ä¿®å·¥å•</div>
                                    </div>
                                    <div class="step">
                                        <div class="step-icon pending" id="dispatchStep">ğŸ‘¨â€ğŸ”§</div>
                                        <div>æ´¾å‘ç»™ç»´ä¿®äººå‘˜</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- å®Œæˆé¡µé¢ -->
                        <div class="page" id="completePage">
                            <div class="complete-page">
                                <div class="success-icon">âœ“</div>
                                <h2 style="color: #28a745; margin-bottom: 8px; font-size: 18px;">æŠ¥ä¿®æˆåŠŸ</h2>
                                <p style="color: #6c757d; margin-bottom: 25px; font-size: 12px;">å·¥å•å·²ç”Ÿæˆå¹¶æ´¾å‘ç»™ç»´ä¿®äººå‘˜</p>

                                <div class="order-info">
                                    <div class="info-row">
                                        <span class="info-label">å·¥å•ç¼–å·</span>
                                        <span class="info-value" id="orderNumber">WO202312150001</span>
                                    </div>
                                    <div class="info-row">
                                        <span class="info-label">æœºäº•ç¼–å·</span>
                                        <span class="info-value" id="wellNumber">01å·æœºäº•</span>
                                    </div>
                                    <div class="info-row">
                                        <span class="info-label">æ•…éšœç±»å‹</span>
                                        <span class="info-value" id="faultType">è®¾å¤‡æŸåï¼Œä¸é€šç”µ</span>
                                    </div>
                                    <div class="info-row">
                                        <span class="info-label">ç´§æ€¥ç¨‹åº¦</span>
                                        <span class="info-value" id="urgency">é«˜</span>
                                    </div>
                                    <div class="info-row">
                                        <span class="info-label">é¢„è®¡å®Œæˆ</span>
                                        <span class="info-value" id="estimatedTime">2å°æ—¶å†…</span>
                                    </div>
                                </div>

                                <button class="back-btn" onclick="resetToEntry()">è¿”å›é¦–é¡µ</button>
                            </div>
                        </div>

                        <!-- æ•°æ®ç»Ÿè®¡é¡µé¢ -->
                        <div class="page" id="statsPage">
                            <div class="stats-page">
                                <div class="stats-header">
                                    <div class="stats-title">æœºäº•ç®¡ç†æ•°æ®ç»Ÿè®¡</div>
                                    <div class="stats-subtitle">æ›´æ–°æ—¶é—´ï¼š2024å¹´12æœˆ15æ—¥ 14:30</div>
                                </div>

                                <!-- æ€»ä½“æ•°æ®ç»Ÿè®¡ -->
                                <div class="stats-grid">
                                    <div class="stat-card primary">
                                        <div class="stat-value">2,048</div>
                                        <div class="stat-label">æœºäº•æ€»æ•°</div>
                                    </div>
                                    <div class="stat-card success">
                                        <div class="stat-value">1,967</div>
                                        <div class="stat-label">æ­£å¸¸æœºäº•æ•°</div>
                                    </div>
                                    <div class="stat-card danger">
                                        <div class="stat-value">81</div>
                                        <div class="stat-label">æ•…éšœæœºäº•æ€»æ•°</div>
                                    </div>
                                    <div class="stat-card warning">
                                        <div class="stat-value">15</div>
                                        <div class="stat-label">æœ¬æœˆä¸ŠæŠ¥æ€»æ•°</div>
                                    </div>
                                    <div class="stat-card info">
                                        <div class="stat-value">3</div>
                                        <div class="stat-label">ä»Šæ—¥ä¸ŠæŠ¥æ€»æ•°</div>
                                    </div>
                                    <div class="stat-card success">
                                        <div class="stat-value">245</div>
                                        <div class="stat-label">ç´¯è®¡ç»´ä¿®æ•°</div>
                                    </div>
                                    <div class="stat-card warning">
                                        <div class="stat-value">5</div>
                                        <div class="stat-label">ä»Šæ—¥å¾…ç»´ä¿®æ•°</div>
                                    </div>
                                    <div class="stat-card info">
                                        <div class="stat-value">2</div>
                                        <div class="stat-label">ä»Šæ—¥ç»´ä¿®æ•°</div>
                                    </div>
                                    <div class="stat-card">
                                        <div class="stat-value">8</div>
                                        <div class="stat-label">ä»Šæ—¥å¾…å·¡æ£€æ•°</div>
                                    </div>
                                </div>

                                <!-- ç»„ç»‡ç»Ÿè®¡ -->
                                <div class="org-stats">
                                    <div class="org-header">
                                        <div class="org-name">ğŸ¡ èµµæ¥¼æ‘</div>
                                        <div class="org-total">ç®¡è¾–æœºäº•ï¼š520å°</div>
                                    </div>
                                    <div class="org-data">
                                        <div class="org-item">
                                            <span class="org-item-label">æ•…éšœæ•°é‡</span>
                                            <span class="org-item-value urgent">12å°</span>
                                        </div>
                                        <div class="org-item">
                                            <span class="org-item-label">æ­£å¸¸è¿è¡Œ</span>
                                            <span class="org-item-value normal">508å°</span>
                                        </div>
                                        <div class="org-item">
                                            <span class="org-item-label">æœ¬æœˆæŠ¥ä¿®</span>
                                            <span class="org-item-value">8æ¬¡</span>
                                        </div>
                                        <div class="org-item">
                                            <span class="org-item-label">å¹³å‡ç»´ä¿®æ—¶é•¿</span>
                                            <span class="org-item-value">2.5å°æ—¶</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="org-stats">
                                    <div class="org-header">
                                        <div class="org-name">ğŸ¡ å°å¼ æ‘</div>
                                        <div class="org-total">ç®¡è¾–æœºäº•ï¼š680å°</div>
                                    </div>
                                    <div class="org-data">
                                        <div class="org-item">
                                            <span class="org-item-label">æ•…éšœæ•°é‡</span>
                                            <span class="org-item-value urgent">25å°</span>
                                        </div>
                                        <div class="org-item">
                                            <span class="org-item-label">æ­£å¸¸è¿è¡Œ</span>
                                            <span class="org-item-value normal">655å°</span>
                                        </div>
                                        <div class="org-item">
                                            <span class="org-item-label">æœ¬æœˆæŠ¥ä¿®</span>
                                            <span class="org-item-value">4æ¬¡</span>
                                        </div>
                                        <div class="org-item">
                                            <span class="org-item-label">å¹³å‡ç»´ä¿®æ—¶é•¿</span>
                                            <span class="org-item-value">3.2å°æ—¶</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="org-stats">
                                    <div class="org-header">
                                        <div class="org-name">ğŸ¡ ç‹åº„æ‘</div>
                                        <div class="org-total">ç®¡è¾–æœºäº•ï¼š848å°</div>
                                    </div>
                                    <div class="org-data">
                                        <div class="org-item">
                                            <span class="org-item-label">æ•…éšœæ•°é‡</span>
                                            <span class="org-item-value urgent">44å°</span>
                                        </div>
                                        <div class="org-item">
                                            <span class="org-item-label">æ­£å¸¸è¿è¡Œ</span>
                                            <span class="org-item-value normal">804å°</span>
                                        </div>
                                        <div class="org-item">
                                            <span class="org-item-label">æœ¬æœˆæŠ¥ä¿®</span>
                                            <span class="org-item-value">3æ¬¡</span>
                                        </div>
                                        <div class="org-item">
                                            <span class="org-item-label">å¹³å‡ç»´ä¿®æ—¶é•¿</span>
                                            <span class="org-item-value">1.8å°æ—¶</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- æŸ¥çœ‹å…¨éƒ¨ç»„ç»‡æŒ‰é’® -->
                                <div style="text-align: center; margin: 20px 0;">
                                    <button style="
                                        background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
                                        color: white;
                                        border: none;
                                        padding: 10px 20px;
                                        border-radius: 20px;
                                        font-size: 13px;
                                        font-weight: 600;
                                        cursor: pointer;
                                        transition: all 0.3s ease;
                                        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                                    " onclick="alert('æŸ¥çœ‹å…¨éƒ¨ç»„ç»‡åŠŸèƒ½ï¼ˆå¾…å¼€å‘ï¼‰')">
                                        ğŸ“‹ æŸ¥çœ‹å…¨éƒ¨ç»„ç»‡ç»Ÿè®¡
                                    </button>
                                </div>

                                <!-- ç»´ä¿®æ—¶é•¿ç»Ÿè®¡ -->
                                <div class="duration-stats">
                                    <div class="duration-header">â±ï¸ ç»´ä¿®å“åº”æ—¶é•¿åˆ†æ</div>
                                    
                                    <div class="duration-bar">
                                        <div class="duration-bar-header">
                                            <span class="duration-bar-label">2å°æ—¶å†…å®Œæˆ</span>
                                            <span class="duration-bar-value">65%</span>
                                        </div>
                                        <div class="duration-bar-fill">
                                            <div class="duration-bar-progress fast" style="width: 65%;"></div>
                                        </div>
                                    </div>

                                    <div class="duration-bar">
                                        <div class="duration-bar-header">
                                            <span class="duration-bar-label">2-6å°æ—¶å®Œæˆ</span>
                                            <span class="duration-bar-value">25%</span>
                                        </div>
                                        <div class="duration-bar-fill">
                                            <div class="duration-bar-progress normal" style="width: 25%;"></div>
                                        </div>
                                    </div>

                                    <div class="duration-bar">
                                        <div class="duration-bar-header">
                                            <span class="duration-bar-label">è¶…è¿‡6å°æ—¶</span>
                                            <span class="duration-bar-value">10%</span>
                                        </div>
                                        <div class="duration-bar-fill">
                                            <div class="duration-bar-progress slow" style="width: 10%;"></div>
                                        </div>
                                    </div>
                                </div>

                                <!-- æœªç»´ä¿®ç»Ÿè®¡ -->
                                <div class="duration-stats">
                                    <div class="duration-header">âš ï¸ å¾…å¤„ç†å·¥å•ç»Ÿè®¡</div>
                                    
                                    <div class="org-data">
                                        <div class="org-item">
                                            <span class="org-item-label">ç´§æ€¥å·¥å•</span>
                                            <span class="org-item-value urgent">2ä¸ª</span>
                                        </div>
                                        <div class="org-item">
                                            <span class="org-item-label">æ™®é€šå·¥å•</span>
                                            <span class="org-item-value">3ä¸ª</span>
                                        </div>
                                        <div class="org-item">
                                            <span class="org-item-label">è¶…æ—¶å·¥å•</span>
                                            <span class="org-item-value urgent">1ä¸ª</span>
                                        </div>
                                        <div class="org-item">
                                            <span class="org-item-label">å¹³å‡ç­‰å¾…æ—¶é•¿</span>
                                            <span class="org-item-value">4.2å°æ—¶</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- æ–°æ•°æ®ç»Ÿè®¡é¡µé¢ -->
                        <div class="page" id="newStatsPage">
                            <div class="new-stats-page">
                                <!-- è¡Œæ”¿åŒºåŸŸé€‰æ‹© -->
                                <div class="region-selector">
                                    <span class="region-label">å½“å‰åŒºåŸŸï¼š</span>
                                    <div class="region-value">
                                        <span>å•†ä¸˜å¸‚</span>
                                        <span class="region-icon">ğŸ“</span>
                                    </div>
                                </div>

                                <!-- ä¸ŠæŠ¥ç»Ÿè®¡æ¨¡å— -->
                                <div class="stats-module">
                                    <div class="module-header">
                                        <div class="module-title">
                                            <span class="module-icon">ğŸ“</span>
                                            <span>ä¸ŠæŠ¥ç»Ÿè®¡</span>
                                        </div>
                                        <button class="drill-btn" onclick="drillDown('repair', 'county')">
                                            <span>ä¸‹é’»æŸ¥çœ‹</span>
                                            <span>ğŸ”</span>
                                        </button>
                                    </div>
                                    <div class="stats-row">
                                        <div class="stat-item highlight">
                                            <div class="stat-item-value">152</div>
                                            <div class="stat-item-label">æœ¬æœˆæŠ¥ä¿®æ€»æ•°</div>
                                        </div>
                                        <div class="stat-item warning">
                                            <div class="stat-item-value">23</div>
                                            <div class="stat-item-label">ä»Šæ—¥æŠ¥ä¿®æ€»æ•°</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- å·¡æ£€ç»Ÿè®¡æ¨¡å— -->
                                <div class="stats-module">
                                    <div class="module-header">
                                        <div class="module-title">
                                            <span class="module-icon">ğŸ”</span>
                                            <span>å·¡æ£€ç»Ÿè®¡</span>
                                        </div>
                                        <button class="drill-btn" onclick="drillDown('inspection', 'county')">
                                            <span>ä¸‹é’»æŸ¥çœ‹</span>
                                            <span>ğŸ”</span>
                                        </button>
                                    </div>
                                    <div class="stats-row">
                                        <div class="stat-item success">
                                            <div class="stat-item-value">485</div>
                                            <div class="stat-item-label">æœ¬æœˆå·¡æ£€æ€»æ•°</div>
                                        </div>
                                        <div class="stat-item highlight">
                                            <div class="stat-item-value">45</div>
                                            <div class="stat-item-label">ä»Šæ—¥å¾…å·¡æ£€æ•°</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- ç»´ä¿®ç»Ÿè®¡æ¨¡å— -->
                                <div class="stats-module">
                                    <div class="module-header">
                                        <div class="module-title">
                                            <span class="module-icon">ğŸ”§</span>
                                            <span>ç»´ä¿®ç»Ÿè®¡</span>
                                        </div>
                                        <button class="drill-btn" onclick="drillDown('maintenance', 'county')">
                                            <span>ä¸‹é’»æŸ¥çœ‹</span>
                                            <span>ğŸ”</span>
                                        </button>
                                    </div>
                                    <div class="stats-row">
                                        <div class="stat-item success">
                                            <div class="stat-item-value">128</div>
                                            <div class="stat-item-label">æœ¬æœˆç»´ä¿®æ€»æ•°</div>
                                        </div>
                                        <div class="stat-item warning">
                                            <div class="stat-item-value">18</div>
                                            <div class="stat-item-label">ä»Šæ—¥å¾…ç»´ä¿®æ•°</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- æ•°æ®ä¸‹é’»é¡µé¢ï¼ˆå¿çº§/é•‡çº§/æ‘çº§ï¼‰ -->
                        <div class="page" id="drillDownPage">
                            <div class="drill-down-page">
                                <!-- é¢åŒ…å±‘å¯¼èˆª -->
                                <div class="breadcrumb" id="breadcrumb">
                                    <span class="breadcrumb-item" onclick="backToNewStats()">å•†ä¸˜å¸‚</span>
                                    <span class="breadcrumb-separator">></span>
                                    <span class="breadcrumb-current" id="currentLevel">ä¸ŠæŠ¥ç»Ÿè®¡</span>
                                </div>

                                <!-- åŠ¨æ€å†…å®¹åŒºåŸŸ -->
                                <div id="drillDownContent"></div>
                            </div>
                        </div>

                        <!-- æœºäº•åˆ—è¡¨é¡µé¢ï¼ˆ2çº§é¡µé¢ï¼‰ -->
                        <div class="page" id="wellListPage">
                            <div class="drill-down-page">
                                <!-- é¢åŒ…å±‘å¯¼èˆª -->
                                <div class="breadcrumb">
                                    <span class="breadcrumb-item" onclick="backToNewStats()">å•†ä¸˜å¸‚</span>
                                    <span class="breadcrumb-separator">></span>
                                    <span class="breadcrumb-item" onclick="backToDrillDown()">å®é™µå¿</span>
                                    <span class="breadcrumb-separator">></span>
                                    <span class="breadcrumb-item" onclick="backToDrillDown()">å¼ æ¡¥é•‡</span>
                                    <span class="breadcrumb-separator">></span>
                                    <span class="breadcrumb-current">å¼ æ¡¥æ‘</span>
                                </div>

                                <!-- æœºäº•å¡ç‰‡åˆ—è¡¨ -->
                                <div id="wellListContent"></div>
                            </div>
                        </div>

                        <!-- æœºäº•è¯¦æƒ…é¡µé¢ï¼ˆ3çº§é¡µé¢ï¼‰ -->
                        <div class="page" id="wellDetailPage">
                            <div class="well-detail-page">
                                <!-- é¢åŒ…å±‘å¯¼èˆª -->
                                <div class="breadcrumb">
                                    <span class="breadcrumb-item" onclick="backToNewStats()">å•†ä¸˜å¸‚</span>
                                    <span class="breadcrumb-separator">></span>
                                    <span class="breadcrumb-item" onclick="backToWellList()">å¼ æ¡¥æ‘</span>
                                    <span class="breadcrumb-separator">></span>
                                    <span class="breadcrumb-current">æœºäº•è¯¦æƒ…</span>
                                </div>

                                <!-- æœºäº•åŸºæœ¬ä¿¡æ¯ -->
                                <div class="detail-card">
                                    <div class="detail-header">
                                        <div class="detail-well-number" id="detailWellNumber">ZQ0518</div>
                                        <div class="detail-well-region" id="detailWellRegion">å¼ æ¡¥é•‡ > å¼ æ¡¥æ‘</div>
                                    </div>

                                    <div class="detail-row">
                                        <span class="detail-label">æŠ¥ä¿®äºº</span>
                                        <span class="detail-value" id="detailReporter">å¼ ä¸‰</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-label">æŠ¥ä¿®æ—¶é—´</span>
                                        <span class="detail-value highlight" id="detailTime">2025å¹´10æœˆ16æ—¥ 15:29:07</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-label">æ•…éšœç±»å‹</span>
                                        <span class="detail-value important" id="detailFaultType">æœºäº•ä¸å‡ºæ°´</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-label">æŠ¥ä¿®æ–¹å¼</span>
                                        <span class="detail-value" id="detailMethod">AIè¯­éŸ³æŠ¥ä¿®</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-label">æŠ¥ä¿®ç”µè¯</span>
                                        <span class="detail-value" id="detailPhone">183****0001</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-label">é€šè¯å†…å®¹</span>
                                        <span class="detail-value" id="detailContent" style="font-size: 12px; line-height: 1.5;">æœºäº•çªç„¶ä¸å‡ºæ°´äº†ï¼Œæ£€æŸ¥äº†ä¸€ä¸‹ï¼Œç”µæ˜¯é€šçš„ï¼Œä½†æ˜¯æ°´æ³µå¥½åƒæ²¡æœ‰å£°éŸ³ï¼Œå¯èƒ½æ˜¯æ°´æ³µåäº†ã€‚</span>
                                    </div>
                                </div>

                                <!-- è”ç³»äººä¿¡æ¯ -->
                                <div class="detail-card">
                                    <div style="font-weight: 600; margin-bottom: 12px; font-size: 14px;">ğŸ“ ç›¸å…³è”ç³»äºº</div>
                                    <div class="contact-info">
                                        <div class="contact-item">
                                            <span class="contact-label">äº•é•¿</span>
                                            <span class="contact-value">æå›› 188****0001</span>
                                        </div>
                                        <div class="contact-item">
                                            <span class="contact-label">ç®¡æŠ¤å‘˜</span>
                                            <span class="contact-value">ç‹äº” 188****0002</span>
                                        </div>
                                        <div class="contact-item">
                                            <span class="contact-label">ç»´ä¿®å‘˜</span>
                                            <span class="contact-value">ç‹äº” 188****0002</span>
                                        </div>
                                    </div>
                                </div>

                                <button class="back-drill-btn" onclick="backToWellList()">è¿”å›æœºäº•åˆ—è¡¨</button>
                            </div>
                        </div>

                        <!-- å®šä½æƒé™å¼¹çª— -->
                        <div class="location-modal" id="locationModal">
                            <div class="location-modal-content">
                                <div class="location-modal-header">
                                    <h3 class="location-modal-title">æœºäº•æŠ¥ä¿®ç”³è¯·</h3>
                                    <button class="location-modal-close" onclick="closeLocationModal()">Ã—</button>
                                </div>
                                <div class="location-modal-body">
                                    <div class="location-description">
                                        <strong>è·å–ä½ çš„ä½ç½®ä¿¡æ¯</strong><br><br>
                                        å°†è·å–ä½ çš„å…·ä½“ä½ç½®ä¿¡æ¯ï¼Œç”¨äºè‡ªåŠ¨ä¸ºæ‚¨åŒ¹é…è·ç¦»æœ€è¿‘çš„æœºäº•è®¾å¤‡
                                    </div>
                                    <div class="location-buttons">
                                        <button class="location-btn location-deny-btn" onclick="denyLocation()">æ‹’ç»</button>
                                        <button class="location-btn location-allow-btn" onclick="allowLocation()">å…è®¸</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ç¡®è®¤å¼¹çª— -->
                        <div class="photo-modal" id="confirmModal">
                            <div class="modal-content">
                                <div class="modal-icon">â“</div>
                                <h3 style="margin-bottom: 8px; font-size: 16px;">ä¿¡æ¯ä¸å®Œæ•´</h3>
                                <p style="color: #6c757d; font-size: 12px;">è¯­éŸ³è¯†åˆ«çš„æ•…éšœä¿¡æ¯å¯èƒ½ä¸å¤Ÿè¯¦ç»†ï¼Œå»ºè®®é‡æ–°å½•éŸ³</p>
                                <div class="modal-buttons">
                                    <button class="modal-btn photo-btn-yes" onclick="reRecordVoice()">é‡æ–°å½•éŸ³</button>
                                    <button class="modal-btn photo-btn-no" onclick="forceSubmit()">å¼ºåˆ¶æäº¤</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let isRecording = false;
        let recordingTimer;
        let currentStep = 0;
        let hasPhoto = false;
        let currentWellInfo = {
            number: '01å·æœºäº•',
            location: 'æ‘ä¸œå—è§’å†œç”°',
            distance: 'çº¦50ç±³'
        };

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
        }

        function updateHeader(title) {
            document.getElementById('headerTitle').textContent = title;
        }

        function toggleSection(element) {
            const section = element.parentElement;
            section.classList.toggle('collapsed');
        }

        function showPageAndHighlight(pageId, navElement) {
            // ç§»é™¤æ‰€æœ‰å¯¼èˆªé¡¹çš„activeçŠ¶æ€
            document.querySelectorAll('.nav-item, .nav-sub-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // æ·»åŠ å½“å‰å¯¼èˆªé¡¹çš„activeçŠ¶æ€
            navElement.classList.add('active');
            
            // æ˜¾ç¤ºå¯¹åº”é¡µé¢
            showPage(pageId);
            
            // æ›´æ–°æ ‡é¢˜
            const titles = {
                'entryPage': 'æœºäº•æŠ¥ä¿®',
                'wellConfirmPage': 'ç¡®è®¤æœºäº•',
                'manualWellPage': 'é€‰æ‹©æœºäº•',
                'voicePage': 'AIè¯­éŸ³æŠ¥ä¿®',
                'confirmPage': 'ç¡®è®¤ä¿¡æ¯',
                'photoPage': 'ä¸Šä¼ ç…§ç‰‡',
                'processPage': 'å¤„ç†ä¸­',
                'completePage': 'æŠ¥ä¿®å®Œæˆ',
                'statsPage': 'æ•°æ®ç»Ÿè®¡',
                'newStatsPage': 'æ–°æ•°æ®ç»Ÿè®¡',
                'drillDownPage': 'æ•°æ®ä¸‹é’»',
                'wellListPage': 'æœºäº•åˆ—è¡¨',
                'wellDetailPage': 'æœºäº•è¯¦æƒ…'
            };
            updateHeader(titles[pageId] || 'æœºäº•æŠ¥ä¿®');
        }

        // æ•°æ®ä¸‹é’»ç›¸å…³å˜é‡
        let currentDrillType = ''; // repair, inspection, maintenance
        let drillDownState = {
            level: '', // county, town, village
            county: '',
            town: '',
            village: ''
        };

        // æ¨¡æ‹Ÿæ•°æ®
        const mockData = {
            repair: {
                county: [
                    { name: 'å®é™µå¿', villages: 15, wells: 152 },
                    { name: 'æ¢å›­åŒº', villages: 12, wells: 89 },
                    { name: 'ç¢é˜³åŒº', villages: 18, wells: 203 }
                ],
                town: {
                    'å®é™µå¿': [
                        { name: 'å¼ æ¡¥é•‡', villages: 5, wells: 52 },
                        { name: 'åˆ˜æ¥¼ä¹¡', villages: 4, wells: 38 },
                        { name: 'åå ¡é•‡', villages: 6, wells: 62 }
                    ]
                },
                village: {
                    'å¼ æ¡¥é•‡': [
                        { name: 'å¼ æ¡¥æ‘', wells: 18 },
                        { name: 'ææ¥¼æ‘', wells: 12 },
                        { name: 'ç‹åº„æ‘', wells: 22 }
                    ]
                },
                wells: {
                    'å¼ æ¡¥æ‘': [
                        { number: 'ZQ0518', reporter: 'å¼ ä¸‰', time: '2025å¹´10æœˆ16æ—¥ 15:29:07', fault: 'æœºäº•ä¸å‡ºæ°´' },
                        { number: 'ZQ0352', reporter: 'æå››', time: '2025å¹´10æœˆ16æ—¥ 14:15:23', fault: 'æ°´æ³µå¼‚å“ä¸¥é‡' },
                        { number: 'ZQ0127', reporter: 'ç‹äº”', time: '2025å¹´10æœˆ16æ—¥ 10:08:45', fault: 'ç”µè·¯æ•…éšœæ— æ³•å¯åŠ¨' }
                    ]
                }
            },
            inspection: {
                county: [
                    { name: 'å®é™µå¿', villages: 12, wells: 142 },
                    { name: 'æ¢å›­åŒº', villages: 10, wells: 95 },
                    { name: 'ç¢é˜³åŒº', villages: 15, wells: 187 }
                ],
                town: {
                    'å®é™µå¿': [
                        { name: 'å¼ æ¡¥é•‡', villages: 4, wells: 48 },
                        { name: 'åˆ˜æ¥¼ä¹¡', villages: 3, wells: 32 },
                        { name: 'åå ¡é•‡', villages: 5, wells: 62 }
                    ]
                },
                village: {
                    'å¼ æ¡¥é•‡': [
                        { name: 'å¼ æ¡¥æ‘', wells: 15 },
                        { name: 'ææ¥¼æ‘', wells: 10 },
                        { name: 'ç‹åº„æ‘', wells: 23 }
                    ]
                },
                wells: {
                    'å¼ æ¡¥æ‘': [
                        { number: 'ZQ0518', reporter: 'å¼ ä¸‰', time: '2025å¹´10æœˆ16æ—¥ 15:29:07', fault: 'å¾…å·¡æ£€' },
                        { number: 'ZQ0352', reporter: 'æå››', time: '2025å¹´10æœˆ16æ—¥ 14:15:23', fault: 'å¾…å·¡æ£€' },
                        { number: 'ZQ0127', reporter: 'ç‹äº”', time: '2025å¹´10æœˆ16æ—¥ 10:08:45', fault: 'å¾…å·¡æ£€' }
                    ]
                }
            },
            maintenance: {
                county: [
                    { name: 'å®é™µå¿', villages: 10, wells: 118 },
                    { name: 'æ¢å›­åŒº', villages: 8, wells: 72 },
                    { name: 'ç¢é˜³åŒº', villages: 13, wells: 165 }
                ],
                town: {
                    'å®é™µå¿': [
                        { name: 'å¼ æ¡¥é•‡', villages: 3, wells: 38 },
                        { name: 'åˆ˜æ¥¼ä¹¡', villages: 2, wells: 28 },
                        { name: 'åå ¡é•‡', villages: 5, wells: 52 }
                    ]
                },
                village: {
                    'å¼ æ¡¥é•‡': [
                        { name: 'å¼ æ¡¥æ‘', wells: 12 },
                        { name: 'ææ¥¼æ‘', wells: 8 },
                        { name: 'ç‹åº„æ‘', wells: 18 }
                    ]
                },
                wells: {
                    'å¼ æ¡¥æ‘': [
                        { number: 'ZQ0518', reporter: 'å¼ ä¸‰', time: '2025å¹´10æœˆ16æ—¥ 15:29:07', fault: 'å¾…ç»´ä¿®' },
                        { number: 'ZQ0352', reporter: 'æå››', time: '2025å¹´10æœˆ16æ—¥ 14:15:23', fault: 'å¾…ç»´ä¿®' },
                        { number: 'ZQ0127', reporter: 'ç‹äº”', time: '2025å¹´10æœˆ16æ—¥ 10:08:45', fault: 'å¾…ç»´ä¿®' }
                    ]
                }
            }
        };

        // æ•°æ®ä¸‹é’»ä¸»å‡½æ•°
        function drillDown(type, level) {
            currentDrillType = type;
            drillDownState.level = level;
            
            showPage('drillDownPage');
            updateHeader('æ•°æ®ä¸‹é’»');
            
            // æ›´æ–°é¢åŒ…å±‘
            updateBreadcrumb();
            
            // æ¸²æŸ“å¿çº§æ•°æ®
            renderCountyLevel();
        }

        // æ›´æ–°é¢åŒ…å±‘å¯¼èˆª
        function updateBreadcrumb() {
            const typeNames = {
                'repair': 'ä¸ŠæŠ¥ç»Ÿè®¡',
                'inspection': 'å·¡æ£€ç»Ÿè®¡',
                'maintenance': 'ç»´ä¿®ç»Ÿè®¡'
            };
            
            document.getElementById('currentLevel').textContent = typeNames[currentDrillType];
        }

        // æ¸²æŸ“å¿çº§æ•°æ®
        function renderCountyLevel() {
            const content = document.getElementById('drillDownContent');
            const data = mockData[currentDrillType].county;
            
            let html = '';
            data.forEach((county, index) => {
                html += `
                    <div class="level-card" id="county-${index}">
                        <div class="card-header-row" onclick="toggleCard('county-${index}')">
                            <div class="card-title-section">
                                <div class="card-title">ğŸ›ï¸ ${county.name}</div>
                                <div class="card-subtitle">
                                    <span>ğŸ“ å·²æŠ¥ä¿®æ‘ï¼ˆ${county.villages}ä¸ªï¼‰</span>
                                    <span>ğŸ”§ æŠ¥ä¿®æœºäº•ï¼ˆ${county.wells}ä¸ªï¼‰</span>
                                </div>
                            </div>
                            <div class="card-toggle">â–¼</div>
                        </div>
                        <div class="card-content" id="content-county-${index}"></div>
                    </div>
                `;
            });
            
            content.innerHTML = html;
        }

        // åˆ‡æ¢å¡ç‰‡å±•å¼€/æ”¶èµ·
        function toggleCard(cardId) {
            const card = document.getElementById(cardId);
            const wasExpanded = card.classList.contains('expanded');
            
            if (wasExpanded) {
                card.classList.remove('expanded');
            } else {
                card.classList.add('expanded');
                
                // å¦‚æœæ˜¯å¿çº§å¡ç‰‡ï¼ŒåŠ è½½é•‡çº§æ•°æ®
                if (cardId.startsWith('county-')) {
                    const index = cardId.split('-')[1];
                    const countyName = mockData[currentDrillType].county[index].name;
                    drillDownState.county = countyName;
                    renderTownLevel(cardId, countyName);
                }
            }
        }

        // æ¸²æŸ“é•‡çº§æ•°æ®
        function renderTownLevel(parentCardId, countyName) {
            const contentDiv = document.getElementById('content-' + parentCardId);
            const data = mockData[currentDrillType].town[countyName];
            
            let html = '';
            data.forEach((town, index) => {
                const townId = `town-${countyName}-${index}`;
                html += `
                    <div class="level-card" id="${townId}" style="margin-left: 10px; border-left-color: #28a745;">
                        <div class="card-header-row" onclick="toggleTownCard('${townId}', '${countyName}', '${town.name}')">
                            <div class="card-title-section">
                                <div class="card-title">ğŸ˜ï¸ ${town.name}</div>
                                <div class="card-subtitle">
                                    <span>ğŸ“ å·²æŠ¥ä¿®æ‘ï¼ˆ${town.villages}ä¸ªï¼‰</span>
                                    <span>ğŸ”§ æŠ¥ä¿®æœºäº•ï¼ˆ${town.wells}ä¸ªï¼‰</span>
                                </div>
                            </div>
                            <div class="card-toggle">â–¼</div>
                        </div>
                        <div class="card-content" id="content-${townId}"></div>
                    </div>
                `;
            });
            
            contentDiv.innerHTML = html;
        }

        // åˆ‡æ¢é•‡çº§å¡ç‰‡
        function toggleTownCard(townId, countyName, townName) {
            const card = document.getElementById(townId);
            const wasExpanded = card.classList.contains('expanded');
            
            if (wasExpanded) {
                card.classList.remove('expanded');
            } else {
                card.classList.add('expanded');
                drillDownState.town = townName;
                renderVillageLevel(townId, townName);
            }
        }

        // æ¸²æŸ“æ‘çº§æ•°æ®
        function renderVillageLevel(parentTownId, townName) {
            const contentDiv = document.getElementById('content-' + parentTownId);
            const data = mockData[currentDrillType].village[townName];
            
            let html = '';
            data.forEach((village, index) => {
                html += `
                    <div class="well-card" onclick="showWellList('${village.name}')">
                        <div class="well-card-title">ğŸ¡ ${village.name}</div>
                        <div class="well-card-info">æŠ¥ä¿®æœºäº•ï¼š${village.wells}ä¸ª</div>
                    </div>
                `;
            });
            
            contentDiv.innerHTML = html;
        }

        // æ˜¾ç¤ºæœºäº•åˆ—è¡¨
        function showWellList(villageName) {
            drillDownState.village = villageName;
            showPage('wellListPage');
            updateHeader('æœºäº•åˆ—è¡¨');
            
            const content = document.getElementById('wellListContent');
            const wells = mockData[currentDrillType].wells[villageName];
            
            let html = '';
            wells.forEach((well, index) => {
                html += `
                    <div class="level-card" onclick="showWellDetail('${well.number}', '${villageName}')">
                        <div class="card-title-section">
                            <div class="card-title">${drillDownState.town} > ${villageName}</div>
                            <div class="card-title" style="color: #4285f4; font-size: 16px; margin-top: 6px;">æœºäº•ç¼–å·ï¼š${well.number}</div>
                            <div style="margin-top: 10px;">
                                <div style="font-size: 12px; color: #666; margin-bottom: 4px;">æŠ¥ä¿®äººï¼š${well.reporter}</div>
                                <div style="font-size: 12px; color: #4285f4; font-weight: 600; margin-bottom: 4px;">æŠ¥ä¿®æ—¶é—´ï¼š${well.time}</div>
                                <div style="font-size: 13px; color: #dc3545; font-weight: 600;">æ•…éšœç±»å‹ï¼š${well.fault}</div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            content.innerHTML = html;
        }

        // æ˜¾ç¤ºæœºäº•è¯¦æƒ…
        function showWellDetail(wellNumber, villageName) {
            showPage('wellDetailPage');
            updateHeader('æœºäº•è¯¦æƒ…');
            
            // æ›´æ–°è¯¦æƒ…é¡µä¿¡æ¯
            document.getElementById('detailWellNumber').textContent = wellNumber;
            document.getElementById('detailWellRegion').textContent = `${drillDownState.town} > ${villageName}`;
            
            // æ ¹æ®ç±»å‹æ›´æ–°æ ‡ç­¾
            const typeLabels = {
                'repair': 'æŠ¥ä¿®',
                'inspection': 'å·¡æ£€',
                'maintenance': 'ç»´ä¿®'
            };
            
            // å¯ä»¥æ ¹æ®éœ€è¦åŠ¨æ€æ›´æ–°å…¶ä»–è¯¦æƒ…ä¿¡æ¯
        }

        // è¿”å›å¯¼èˆªå‡½æ•°
        function backToNewStats() {
            showPage('newStatsPage');
            updateHeader('æ–°æ•°æ®ç»Ÿè®¡');
            drillDownState = { level: '', county: '', town: '', village: '' };
        }

        function backToDrillDown() {
            showPage('drillDownPage');
            updateHeader('æ•°æ®ä¸‹é’»');
            renderCountyLevel();
        }

        function backToWellList() {
            showPage('wellListPage');
            updateHeader('æœºäº•åˆ—è¡¨');
        }

        function startVoiceRepair() {
            // æ˜¾ç¤ºå®šä½æƒé™å¼¹çª—
            document.getElementById('locationModal').classList.add('show');
            
            // åŒæ—¶æ›´æ–°å¯¼èˆªçŠ¶æ€
            document.querySelectorAll('.nav-item, .nav-sub-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelectorAll('.nav-sub-item')[0].classList.add('active');
        }

        function closeLocationModal() {
            document.getElementById('locationModal').classList.remove('show');
        }

        function allowLocation() {
            // å…³é—­å¼¹çª—
            closeLocationModal();
            
            // æ˜¾ç¤ºæœºäº•ç¡®è®¤é¡µé¢
            showPage('wellConfirmPage');
            updateHeader('ç¡®è®¤æœºäº•');
            
            // æ›´æ–°å¯¼èˆªçŠ¶æ€
            document.querySelectorAll('.nav-item, .nav-sub-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelectorAll('.nav-sub-item')[1].classList.add('active');
        }

        function denyLocation() {
            // å…³é—­å¼¹çª—
            closeLocationModal();
            
            // æ˜¾ç¤ºæ‰‹åŠ¨é€‰æ‹©æœºäº•é¡µé¢
            showPage('manualWellPage');
            updateHeader('é€‰æ‹©æœºäº•');
            
            // æ›´æ–°å¯¼èˆªçŠ¶æ€
            document.querySelectorAll('.nav-item, .nav-sub-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelectorAll('.nav-sub-item')[1].classList.add('active');
        }

        function confirmWell(isCorrect) {
            if (isCorrect) {
                showPage('voicePage');
                updateHeader('è¯­éŸ³æŠ¥ä¿®');
                
                // æ›´æ–°å¯¼èˆªçŠ¶æ€
                document.querySelectorAll('.nav-item, .nav-sub-item').forEach(item => {
                    item.classList.remove('active');
                });
                document.querySelectorAll('.nav-sub-item')[2].classList.add('active');
            } else {
                showPage('manualWellPage');
                updateHeader('é€‰æ‹©æœºäº•');
            }
        }

        function confirmManualWell() {
            const wellNumber = document.getElementById('wellNumberInput').value;
            const wellLocation = document.getElementById('wellLocationInput').value;
            
            if (wellNumber && wellLocation) {
                currentWellInfo.number = wellNumber;
                currentWellInfo.location = wellLocation;
                currentWellInfo.distance = 'æ‰‹åŠ¨è¾“å…¥';
                
                showPage('voicePage');
                updateHeader('è¯­éŸ³æŠ¥ä¿®');
                
                // æ›´æ–°å¯¼èˆªçŠ¶æ€
                document.querySelectorAll('.nav-item, .nav-sub-item').forEach(item => {
                    item.classList.remove('active');
                });
                document.querySelectorAll('.nav-sub-item')[2].classList.add('active');
            } else {
                alert('è¯·å¡«å†™å®Œæ•´çš„æœºäº•ä¿¡æ¯');
            }
        }

        function goToManualReport() {
            alert('è½¬åˆ°æ‰‹åŠ¨å¡«æŠ¥åŠŸèƒ½ï¼ˆæ­¤åŠŸèƒ½æœªåœ¨åŸå‹ä¸­å®ç°ï¼‰');
        }

        function triggerLocationModal(navElement) {
            // æ›´æ–°å¯¼èˆªçŠ¶æ€
            document.querySelectorAll('.nav-item, .nav-sub-item').forEach(item => {
                item.classList.remove('active');
            });
            navElement.classList.add('active');
            
            // æ˜¾ç¤ºå®šä½æƒé™å¼¹çª—
            document.getElementById('locationModal').classList.add('show');
        }

        // å¯¹è¯ç®¡ç†
        let conversationState = {
            faultType: '',
            userName: '',
            userPhone: '',
            messages: [],
            currentStep: 0
        };

        const aiQuestions = [
            {
                check: (state) => !state.faultType,
                question: "è¯·è¯¦ç»†æè¿°ä¸€ä¸‹æ•…éšœç±»å‹ï¼Œæ¯”å¦‚ï¼šäº•ç›–ä¸¢å¤±ã€ä¸é€šç”µã€è®¾å¤‡æŸåç­‰ã€‚"
            },
            {
                check: (state) => !state.userName,
                question: "è¯·æä¾›æ‚¨çš„å§“åï¼Œæ–¹ä¾¿æˆ‘ä»¬è”ç³»æ‚¨ã€‚"
            },
            {
                check: (state) => !state.userPhone,
                question: "è¯·æä¾›æ‚¨çš„è”ç³»ç”µè¯ï¼Œæ–¹ä¾¿ç»´ä¿®äººå‘˜è”ç³»æ‚¨ã€‚"
            }
        ];

        function startRecording() {
            if (!isRecording) {
                isRecording = true;
                const voiceBtn = document.getElementById('voiceBtn');
                const inputStatus = document.getElementById('inputStatus');
                
                voiceBtn.classList.add('recording');
                voiceBtn.textContent = 'ğŸ”´';
                inputStatus.textContent = 'æ­£åœ¨å½•éŸ³...æ¾å¼€å‘é€';
            }
        }

        function stopRecording() {
            if (isRecording) {
                isRecording = false;
                const voiceBtn = document.getElementById('voiceBtn');
                const inputStatus = document.getElementById('inputStatus');
                
                voiceBtn.classList.remove('recording');
                voiceBtn.textContent = 'ğŸ¤';
                inputStatus.textContent = 'æ­£åœ¨è¯†åˆ«...';
                
                // æ¨¡æ‹Ÿè¯­éŸ³è¯†åˆ«å’Œå¯¹è¯
                setTimeout(() => {
                    processVoiceInput();
                    inputStatus.textContent = 'é•¿æŒ‰å½•éŸ³ï¼Œæ¾å¼€å‘é€';
                }, 1500);
            }
        }

        function processVoiceInput() {
            // æ¨¡æ‹Ÿä¸åŒçš„è¯­éŸ³è¾“å…¥åœºæ™¯
            const step = conversationState.currentStep;
            let userMessage = '';
            
            if (step === 0) {
                userMessage = '01å·æœºäº•ä¸é€šç”µäº†ï¼Œè®¾å¤‡å®Œå…¨æ²¡æœ‰ååº”ï¼Œæˆ‘æ˜¯å¼ å¸ˆå‚…ï¼Œç”µè¯æ˜¯138****5678';
                // æ™ºèƒ½æå–ä¿¡æ¯
                conversationState.faultType = 'ä¸é€šç”µ';
                conversationState.userName = 'å¼ å¸ˆå‚…';
                conversationState.userPhone = '138****5678';
            } else if (step === 1) {
                userMessage = 'äº•ç›–ä¸¢å¤±äº†ï¼Œå¾ˆå±é™©';
                conversationState.faultType = 'äº•ç›–ä¸¢å¤±';
            } else if (step === 2) {
                userMessage = 'æˆ‘å«ææ˜';
                conversationState.userName = 'ææ˜';
            } else if (step === 3) {
                userMessage = 'æˆ‘çš„ç”µè¯æ˜¯139****1234';
                conversationState.userPhone = '139****1234';
            }
            
            // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
            addMessage('user', userMessage);
            
            // æ›´æ–°ä¿¡æ¯çŠ¶æ€
            updateInfoStatus();
            
            conversationState.currentStep++;
            
            // AIå›å¤
            setTimeout(() => {
                const missingInfo = aiQuestions.find(q => q.check(conversationState));
                if (missingInfo) {
                    addMessage('ai', missingInfo.question);
                } else {
                    addMessage('ai', 'ä¿¡æ¯æ”¶é›†å®Œæˆï¼è¯·ç¡®è®¤æ— è¯¯åæäº¤æŠ¥ä¿®ã€‚');
                    document.getElementById('submitConversationBtn').classList.add('show');
                }
            }, 800);
        }

        function addMessage(type, content) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            
            const now = new Date();
            const timeStr = now.getHours().toString().padStart(2, '0') + ':' + 
                           now.getMinutes().toString().padStart(2, '0');
            
            messageDiv.innerHTML = `
                <div class="message-bubble">${content}</div>
                <div class="message-time">${timeStr}</div>
            `;
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function updateInfoStatus() {
            document.getElementById('faultTypeStatus').textContent = 
                conversationState.faultType || 'å¾…æ”¶é›†';
            document.getElementById('faultTypeStatus').className = 
                'info-value ' + (conversationState.faultType ? 'collected' : 'missing');
                
            document.getElementById('nameStatus').textContent = 
                conversationState.userName || 'å¾…æ”¶é›†';
            document.getElementById('nameStatus').className = 
                'info-value ' + (conversationState.userName ? 'collected' : 'missing');
                
            document.getElementById('phoneStatus').textContent = 
                conversationState.userPhone || 'å¾…æ”¶é›†';
            document.getElementById('phoneStatus').className = 
                'info-value ' + (conversationState.userPhone ? 'collected' : 'missing');
        }

        function submitConversation() {
            showPage('confirmPage');
            updateHeader('ç¡®è®¤ä¿¡æ¯');
            
            // æ›´æ–°ç¡®è®¤é¡µé¢çš„ä¿¡æ¯
            document.getElementById('confirmWellNumber').textContent = currentWellInfo.number;
            document.getElementById('confirmWellLocation').textContent = currentWellInfo.location;
            document.getElementById('confirmVoiceText').textContent = 
                `æ•…éšœç±»å‹ï¼š${conversationState.faultType}\nè”ç³»äººï¼š${conversationState.userName}\nç”µè¯ï¼š${conversationState.userPhone}`;
            
            // æ›´æ–°å¯¼èˆªçŠ¶æ€
            document.querySelectorAll('.nav-item, .nav-sub-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelectorAll('.nav-sub-item')[3].classList.add('active');
        }

        function checkVoiceComplete() {
            // è¿™ä¸ªå‡½æ•°ç°åœ¨ç”± submitConversation æ›¿ä»£
            submitConversation();
        }

        function reRecordVoice() {
            document.getElementById('confirmModal').classList.remove('show');
            showPage('voicePage');
            updateHeader('AIè¯­éŸ³æŠ¥ä¿®');
            
            // é‡ç½®å¯¹è¯çŠ¶æ€
            conversationState = {
                faultType: '',
                userName: '',
                userPhone: '',
                messages: [],
                currentStep: 0
            };
            
            // é‡ç½®èŠå¤©ç•Œé¢
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.innerHTML = `
                <div class="message ai">
                    <div class="message-bubble">
                        æ‚¨å¥½ï¼æˆ‘æ˜¯AIåŠ©æ‰‹ï¼Œè¯·å‘Šè¯‰æˆ‘æœºäº•çš„æ•…éšœæƒ…å†µï¼Œæˆ‘ä¼šå¸®æ‚¨è®°å½•æŠ¥ä¿®ä¿¡æ¯ã€‚
                    </div>
                    <div class="message-time">åˆšåˆš</div>
                </div>
            `;
            
            // é‡ç½®ä¿¡æ¯çŠ¶æ€
            updateInfoStatus();
            
            // éšè—æäº¤æŒ‰é’®
            document.getElementById('submitConversationBtn').classList.remove('show');
            
            // æ›´æ–°å¯¼èˆªçŠ¶æ€
            document.querySelectorAll('.nav-item, .nav-sub-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelectorAll('.nav-sub-item')[2].classList.add('active');
        }

        function confirmInfoComplete() {
            showPage('photoPage');
            updateHeader('ä¸Šä¼ ç…§ç‰‡');
            
            // æ›´æ–°å¯¼èˆªçŠ¶æ€
            document.querySelectorAll('.nav-item, .nav-sub-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelectorAll('.nav-sub-item')[4].classList.add('active');
        }

        function forceSubmit() {
            document.getElementById('confirmModal').classList.remove('show');
            confirmInfoComplete();
        }

        function takePhoto() {
            // æ¨¡æ‹Ÿæ‹ç…§
            document.getElementById('photoPreview').innerHTML = '<div style="color: #4285f4; font-size: 40px;">ğŸ“¸</div>';
            document.getElementById('photoPreview').classList.add('has-image');
            document.getElementById('uploadBtn').style.display = 'inline-block';
            hasPhoto = true;
        }

        function uploadPhoto() {
            startProcessing();
        }

        function skipPhoto() {
            hasPhoto = false;
            startProcessing();
        }

        function startProcessing() {
            showPage('processPage');
            updateHeader('å¤„ç†ä¸­');
            
            // æ›´æ–°å¯¼èˆªçŠ¶æ€
            document.querySelectorAll('.nav-item, .nav-sub-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelectorAll('.nav-sub-item')[5].classList.add('active');
            
            // æ¨¡æ‹Ÿå¤„ç†è¿‡ç¨‹
            setTimeout(() => {
                document.getElementById('aiStep').classList.add('completed');
                document.getElementById('aiStep').classList.remove('processing');
                document.getElementById('aiStep').textContent = 'âœ“';
                document.getElementById('orderStep').classList.add('processing');
                document.getElementById('orderStep').classList.remove('pending');
            }, 2000);

            setTimeout(() => {
                completeProcess();
            }, 4000);
        }

        function completeProcess() {
            document.getElementById('orderStep').classList.add('completed');
            document.getElementById('orderStep').classList.remove('processing');
            document.getElementById('orderStep').textContent = 'âœ“';
            document.getElementById('dispatchStep').classList.add('processing');
            document.getElementById('dispatchStep').classList.remove('pending');

            setTimeout(() => {
                document.getElementById('dispatchStep').classList.add('completed');
                document.getElementById('dispatchStep').classList.remove('processing');
                document.getElementById('dispatchStep').textContent = 'âœ“';
                
                setTimeout(() => {
                    showPage('completePage');
                    updateHeader('æŠ¥ä¿®å®Œæˆ');
                    
                    // æ›´æ–°å¯¼èˆªçŠ¶æ€
                    document.querySelectorAll('.nav-item, .nav-sub-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    document.querySelectorAll('.nav-sub-item')[2].classList.add('active');
                }, 1000);
            }, 2000);
        }

        function resetToEntry() {
            showPage('entryPage');
            updateHeader('æœºäº•æŠ¥ä¿®');
            
            // æ›´æ–°å¯¼èˆªçŠ¶æ€
            document.querySelectorAll('.nav-item, .nav-sub-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelectorAll('.nav-item')[0].classList.add('active');
            
            // é‡ç½®æ‰€æœ‰çŠ¶æ€
            isRecording = false;
            hasPhoto = false;
            currentWellInfo = {
                number: '01å·æœºäº•',
                location: 'æ‘ä¸œå—è§’å†œç”°',
                distance: 'çº¦50ç±³'
            };
            
            // é‡ç½®å¯¹è¯çŠ¶æ€
            conversationState = {
                faultType: '',
                userName: '',
                userPhone: '',
                messages: [],
                currentStep: 0
            };
            
            // é‡ç½®èŠå¤©ç•Œé¢
            if (document.getElementById('chatMessages')) {
                const chatMessages = document.getElementById('chatMessages');
                chatMessages.innerHTML = `
                    <div class="message ai">
                        <div class="message-bubble">
                            æ‚¨å¥½ï¼æˆ‘æ˜¯AIåŠ©æ‰‹ï¼Œè¯·å‘Šè¯‰æˆ‘æœºäº•çš„æ•…éšœæƒ…å†µï¼Œæˆ‘ä¼šå¸®æ‚¨è®°å½•æŠ¥ä¿®ä¿¡æ¯ã€‚
                        </div>
                        <div class="message-time">åˆšåˆš</div>
                    </div>
                `;
            }
            
            // é‡ç½®ä¿¡æ¯çŠ¶æ€å’Œæäº¤æŒ‰é’®
            updateInfoStatus();
            if (document.getElementById('submitConversationBtn')) {
                document.getElementById('submitConversationBtn').classList.remove('show');
            }
            
            // é‡ç½®ç…§ç‰‡ä¸Šä¼ é¡µé¢
            document.getElementById('photoPreview').innerHTML = '<div class="upload-icon">ğŸ“·</div>';
            document.getElementById('photoPreview').classList.remove('has-image');
            document.getElementById('uploadBtn').style.display = 'none';
            
            // é‡ç½®æ‰‹åŠ¨è¾“å…¥
            document.getElementById('wellNumberInput').value = '';
            document.getElementById('wellLocationInput').value = '';
            
            // é‡ç½®å¤„ç†æ­¥éª¤
            document.getElementById('aiStep').className = 'step-icon processing';
            document.getElementById('aiStep').textContent = 'ğŸ¤–';
            document.getElementById('orderStep').className = 'step-icon pending';
            document.getElementById('orderStep').textContent = 'ğŸ“‹';
            document.getElementById('dispatchStep').className = 'step-icon pending';
            document.getElementById('dispatchStep').textContent = 'ğŸ‘¨â€ğŸ”§';
        }
    </script>
</body>
</html> 